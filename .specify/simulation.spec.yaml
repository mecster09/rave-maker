meta:
  id: rave-simulation
  title: Medidata RAVE Simulation Engine (V2)
  version: 2.0.0
  description: |
    Defines study, subject, visit, form, and query entities along with dynamic behavior.

entities:
  Study:
    description: Represents a simulated RAVE study instance.
    fields:
      id: string
      name: string
      speed_factor: number
      interval_ms: number
      batch_percentage: number
      structure: StudyStructure
      visits: Visit[]
      queries: QueryConfig

  StudyStructure:
    fields:
      sites: integer
      subjects_per_site: integer

  Visit:
    fields:
      name: string
      day: integer
      forms: string[]
      probability: number
      simulate_missed: boolean
      simulate_delayed: boolean
      max_delay_days: integer?
      partial_forms: boolean
      missing_field_probability: number?

  QueryConfig:
    fields:
      enabled: boolean
      missing_data_probability: number
      out_of_range_probability: number

dynamics:
  subject_progression:
    description: Subjects progress through visits sequentially according to study days.
    cadence: "New subjects enrolled every (interval_ms / speed_factor) ms"
    behavior: "Subjects may miss or delay visits per Visit configuration"
  data_updates:
    description: Form data is periodically generated or updated to simulate CRF entries over time.
  query_generation:
    description: Queries are probabilistically injected based on QueryConfig."
