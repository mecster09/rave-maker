meta:
  id: rave-principles
  title: Engineering & Architectural Principles (V3)
  version: 3.0.0
  description: |
    Guiding principles for the Medidata RAVE Mock Study Simulator with TDD-first,
    CI enforcement, determinism, and maintainability requirements.

principles:
  - id: tdd
    priority: critical
    enforcement: "Jest unit tests and Supertest API tests required for every change; PRs blocked without tests."
    title: Test Driven Development
    description: |
      Tests are authored before and alongside implementation. Acceptance criteria are expressed
      as executable API and unit tests. Features are considered done only when tests pass.

  - id: continuous-integration
    priority: critical
    enforcement: "CI must run lint, type-check, build, and tests on each PR and push; failures block merges."
    title: Continuous Integration
    description: |
      CI serves as a quality gate. Build, type, and test failures prevent merge. Code owners review is required.

  - id: deterministic-simulation
    priority: high
    enforcement: "Randomness must be seedable; same seed + config -> reproducible sequences for tests."
    title: Deterministic Simulation
    description: |
      All random generation must accept a seed (from config or env). Deterministic outputs enable reliable tests.

  - id: coverage
    priority: high
    enforcement: "Global coverage thresholds enforced in CI (lines >= 80%, branches >= 80%)."
    title: Coverage Targets
    description: |
      Coverage thresholds prevent untested code from shipping. Critical paths strive for >90%.

  - id: modular-architecture
    priority: high
    enforcement: "Separation of concerns (config/simulation/api/storage); modules unit-testable in isolation."
    title: Modular & Extensible
    description: |
      Decouple components to scale teams and tests. Favor interfaces for storage and generators.

  - id: configuration-first
    priority: high
    enforcement: "No hard-coded behavior; configuration validated against schema; invalid configs fail fast."
    title: Configuration Driven
    description: |
      YAML config is the single source of study behavior. Validation is compulsory on startup and in tests.

  - id: observability
    priority: medium
    enforcement: "Structured logging at INFO; error logs with context; basic metrics exposed for verification."
    title: Observability
    description: |
      Logs and metrics support debugging and performance characterization (e.g., update rates).
